<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8"/>
<title>一步步教你Hadoop多节点集群安装配置 - Alexia(minmin) - 博客园</title>
<link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=VDh8zSH1vx51MDqRT7hK220akQ58FjlaaeGuWBPhfOA1"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="/skins/darkgreentrip/bundle-darkgreentrip.css?v=xPXJVC4GCITs1yYYgSeLkcicCxapqseaPVQLFGMO1wc1"/>
<link type="text/css" rel="stylesheet" href="/blog/customcss/113759.css?v=8Uthw3pYGdIZKO9ZjQCW4uGhdp4%3d"/>
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/lanxuezaipiao/rss"/>
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/lanxuezaipiao/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/lanxuezaipiao/wlwmanifest.xml"/>
<script src="http://common.cnblogs.com/script/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'lanxuezaipiao', cb_enable_mathjax=true;</script>
<script src="/bundles/blog-common.js?v=FPlxjK7DBkhdjUge-xvpcctYZfiyO32cepQZO-j3WJk1" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>
<div id="page_begin_html"></div><script>load_page_begin_html();</script>

<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="http://www.cnblogs.com/lanxuezaipiao/"><img id="blogLogo" src="/Skins/custom/images/logo.gif" alt="返回主页" /></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/lanxuezaipiao/">程序媛想事儿（Alexia）</a></h1>
<h2>在现实的社会中还想追求小幸福的那个傻菇凉...</h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="MyLinks1_HomeLink" class="menu" href="http://www.cnblogs.com/">博客园</a></li>
<li><a id="MyLinks1_MyHomeLink" class="menu" href="http://www.cnblogs.com/lanxuezaipiao/">首页</a></li>
<li><a id="MyLinks1_NewPostLink" class="menu" rel="nofollow" href="http://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li><a id="MyLinks1_ContactLink" class="menu" rel="nofollow" href="http://msg.cnblogs.com/send/Alexia%28minmin%29">联系</a></li>
<li><a id="MyLinks1_Syndication" class="menu" href="http://www.cnblogs.com/lanxuezaipiao/rss">订阅</a>
<!--<a id="MyLinks1_XMLLink" class="aHeaderXML" href="http://www.cnblogs.com/lanxuezaipiao/rss"><img src="http://www.cnblogs.com/images/xml.gif" alt="订阅" /></a>--></li>
<li><a id="MyLinks1_Admin" class="menu" rel="nofollow" href="http://i.cnblogs.com/">管理</a></li>
</ul>
		<div class="blogStats">
			
			
<!--done-->
随笔- 125&nbsp;
文章- 0&nbsp;
评论- 1183&nbsp;

			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/lanxuezaipiao/p/3525554.html">一步步教你Hadoop多节点集群安装配置</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body"><p class="MsoNormal" style="text-justify: inter-ideograph; margin: 8.7pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="font-size: 14pt;">1</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span><span style="font-size: 14pt;">、集群部署介绍</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">1.1 Hadoop</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">简介</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182210318773.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image001[12]" src="http://images.cnitblog.com/blog/390583/201401/182210329391.png" alt="clip_image001[12]" width="72" height="72" border="0" /></a></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> <span lang="EN-US">Hadoop</span>是<span lang="EN-US">Apache</span>软件基金会旗下的一个开源分布式计算平台。以<span lang="EN-US">Hadoop</span>分布式文件系统<span lang="EN-US"><span style="color: #ff0000;">HDFS</span></span><span lang="EN-US">(Hadoop Distributed Filesystem</span>）和<span lang="EN-US"><span style="color: #ff0000;">MapReduce</span></span>（<span lang="EN-US">Google MapReduce</span>的开源实现）为<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">核心</span></span></strong>的<span lang="EN-US">Hadoop</span>为用户提供了系统底层细节透明的分布式基础架构。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 对于<span lang="EN-US">Hadoop</span>的集群来讲，可以分成两大类角色：<strong><span lang="EN-US"><span style="color: #333399;">Master</span></span></strong>和<strong><span lang="EN-US"><span style="color: #333399;">Salve</span></span></strong>。一个<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US">HDFS</span></strong>集群是由一个<strong><span lang="EN-US"><span style="color: #333399;">NameNode</span></span></strong>和若干个<strong><span lang="EN-US"><span style="color: #333399;">DataNode</span></span></strong>组成的。其中<span lang="EN-US">NameNode</span>作为主服务器，管理文件系统的命名空间和客户端对文件系统的访问操作；集群中的<span lang="EN-US">DataNode</span>管理存储的数据。<span style="mso-bidi-font-weight: bold;" lang="EN-US">MapReduce</span>框架是由一个单独运行在主节点上的<span lang="EN-US">JobTracker</span>和运行在每个从节点的<span lang="EN-US">TaskTracker</span>共同组成的。主节点负责调度构成一个作业的所有任 务，这些任务分布在不同的从节点上。主节点监控它们的执行情况，并且重新执行之前的失败任务；从节点仅负责由主节点指派的任务。当一个<span lang="EN-US">Job</span>被提交时，<span lang="EN-US">JobTracker</span>接收到提交作业和配置信息之后，就会将配置信息等分发给从节点，同时调度任务并监控<span lang="EN-US">TaskTracker</span>的执行。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 从上面的介绍可以看出，<span lang="EN-US">HDFS</span>和<span lang="EN-US">MapReduce</span>共同组成了<span lang="EN-US">Hadoop</span>分布式系统体系结构的核心。<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #0000ff;">HDFS</span></span></strong>在集群上实现<span><span style="color: #ff0000;">分布式文件系统</span></span>，<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #0000ff;">MapReduce</span></span></strong>在集群上实现了<span><span style="color: #ff0000;">分布式计算</span></span>和<span><span style="color: #ff0000;">任务处理</span></span>。<span lang="EN-US">HDFS</span>在<span lang="EN-US">MapReduce</span>任务处理过程中提供了文件操作和存储等支持，<span lang="EN-US">MapReduce</span>在<span lang="EN-US">HDFS</span>的基础上实现了任务的分发、跟踪、执行等工作，并收集结果，二者相互作用，完成了<span lang="EN-US">Hadoop</span>分布式集群的主要任务。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">1.2 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">环境说明</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 我的环境是在虚拟机中配置的，<span lang="EN-US">Hadoop</span>集群中包括<span lang="EN-US">4</span>个节点：<span lang="EN-US">1</span>个<span lang="EN-US">Master</span>，<span lang="EN-US">2</span>个<span lang="EN-US">Salve</span>，节点之间局域网连接，可以相互<span lang="EN-US">ping</span>通，节点<span lang="EN-US">IP</span>地址分布如下：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify">&nbsp;</p>
<div align="center">
<table class="MsoNormalTable" style="text-align: left; border-collapse: collapse; mso-table-layout-alt: fixed;" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr style="mso-yfti-irow: 0; mso-yfti-firstrow: yes;">
<td style="padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; background: #e0e0e0; padding-top: 0.75pt; mso-border-alt: solid black .5pt; mso-shading: windowtext; mso-pattern: solid #e0e0e0; border: black 1pt solid;" valign="top" width="176">
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; background: #e0e0e0; mso-shading: windowtext; mso-pattern: solid #e0e0e0;" align="center"><strong style="mso-bidi-font-weight: normal;"><span style="background-image: none; background-attachment: scroll; background-repeat: repeat; background-position: 0% 0%;"><span style="font-family: 宋体;"><span style="font-size: 10pt;">虚拟机系统</span></span></span></strong></p>
</td>
<td style="border-bottom: black 1pt solid; border-left: medium none; padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; background: #e0e0e0; border-top: black 1pt solid; border-right: black 1pt solid; padding-top: 0.75pt; mso-border-alt: solid black .5pt; mso-shading: windowtext; mso-pattern: solid #e0e0e0; mso-border-left-alt: solid black .5pt;" valign="top" width="176">
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; background: #e0e0e0; mso-shading: windowtext; mso-pattern: solid #e0e0e0;" align="center"><strong style="mso-bidi-font-weight: normal;"><span style="background-image: none; background-attachment: scroll; background-repeat: repeat; background-position: 0% 0%;"><span style="font-family: 宋体;"><span style="font-size: 10pt;">机器名称</span></span></span></strong></p>
</td>
<td style="border-bottom: black 1pt solid; border-left: medium none; padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; background: #e0e0e0; border-top: black 1pt solid; border-right: black 1pt solid; padding-top: 0.75pt; mso-shading: windowtext; mso-pattern: solid #e0e0e0; mso-border-top-alt: solid black .5pt; mso-border-bottom-alt: solid black .5pt; mso-border-right-alt: solid black .5pt;" valign="top" width="214">
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; background: #e0e0e0; mso-shading: windowtext; mso-pattern: solid #e0e0e0;" align="center"><strong style="mso-bidi-font-weight: normal;"><span style="background-image: none; background-attachment: scroll; background-repeat: repeat; background-position: 0% 0%; mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;"><span style="font-size: 10pt;">IP</span></span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="background-image: none; background-attachment: scroll; background-repeat: repeat; background-position: 0% 0%;"><span style="font-family: 宋体;"><span style="font-size: 10pt;">地址</span></span></span></strong></p>
</td>
</tr>
<tr style="mso-yfti-irow: 1;">
<td style="border-bottom: black 1pt solid; border-left: black 1pt solid; padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; border-top: medium none; border-right: black 1pt solid; padding-top: 0.75pt; mso-border-left-alt: solid black .5pt; mso-border-bottom-alt: solid black .5pt; mso-border-right-alt: solid black .5pt;" valign="top" width="176">
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt;" align="justify"><span style="mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;"><span style="font-size: 10pt;">Ubuntu 13.04</span></span></span></p>
</td>
<td style="border-bottom: black 1pt solid; border-left: medium none; padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; border-top: medium none; border-right: black 1pt solid; padding-top: 0.75pt; mso-border-left-alt: solid black .5pt; mso-border-bottom-alt: solid black .5pt; mso-border-right-alt: solid black .5pt;" valign="top" width="176">
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt;" align="justify"><span style="mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;"><span style="font-size: 10pt;">Master.Hadoop</span></span></span></p>
</td>
<td style="border-bottom: black 1pt solid; border-left: medium none; padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; border-top: medium none; border-right: black 1pt solid; padding-top: 0.75pt; mso-border-bottom-alt: solid black .5pt; mso-border-right-alt: solid black .5pt;" valign="top" width="214">
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt;" align="justify"><span style="mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;"><span style="font-size: 10pt;">192.168.1.141</span></span></span></p>
</td>
</tr>
<tr style="mso-yfti-irow: 2;">
<td style="border-bottom: black 1pt solid; border-left: black 1pt solid; padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; border-top: medium none; border-right: black 1pt solid; padding-top: 0.75pt; mso-border-left-alt: solid black .5pt; mso-border-bottom-alt: solid black .5pt; mso-border-right-alt: solid black .5pt;" valign="top" width="176">
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt;" align="justify"><span style="mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;"><span style="font-size: 10pt;">Ubuntu 9.11</span></span></span></p>
</td>
<td style="border-bottom: black 1pt solid; border-left: medium none; padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; border-top: medium none; border-right: black 1pt solid; padding-top: 0.75pt; mso-border-left-alt: solid black .5pt; mso-border-bottom-alt: solid black .5pt; mso-border-right-alt: solid black .5pt;" valign="top" width="176">
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt;" align="justify"><span style="mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;"><span style="font-size: 10pt;">Salve1.Hadoop</span></span></span></p>
</td>
<td style="border-bottom: black 1pt solid; border-left: medium none; padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; border-top: medium none; border-right: black 1pt solid; padding-top: 0.75pt; mso-border-bottom-alt: solid black .5pt; mso-border-right-alt: solid black .5pt;" valign="top" width="214">
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt;" align="justify"><span style="mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;"><span style="font-size: 10pt;">192.168.1.142</span></span></span></p>
</td>
</tr>
<tr style="mso-yfti-irow: 3; mso-yfti-lastrow: yes;">
<td style="border-bottom: black 1pt solid; border-left: black 1pt solid; padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; border-top: medium none; border-right: black 1pt solid; padding-top: 0.75pt; mso-border-left-alt: solid black .5pt; mso-border-bottom-alt: solid black .5pt; mso-border-right-alt: solid black .5pt;" valign="top" width="176">
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt;" align="justify"><span style="mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;"><span style="font-size: 10pt;">Fedora 17</span></span></span></p>
</td>
<td style="border-bottom: black 1pt solid; border-left: medium none; padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; border-top: medium none; border-right: black 1pt solid; padding-top: 0.75pt; mso-border-left-alt: solid black .5pt; mso-border-bottom-alt: solid black .5pt; mso-border-right-alt: solid black .5pt;" valign="top" width="176">
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt;" align="justify"><span style="mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;"><span style="font-size: 10pt;">Salve2.Hadoop</span></span></span></p>
</td>
<td style="border-bottom: black 1pt solid; border-left: medium none; padding-bottom: 0.75pt; padding-left: 5.25pt; padding-right: 5.25pt; border-top: medium none; border-right: black 1pt solid; padding-top: 0.75pt; mso-border-bottom-alt: solid black .5pt; mso-border-right-alt: solid black .5pt;" valign="top" width="214">
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt;" align="justify"><span style="mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;"><span style="font-size: 10pt;">192.168.1.137</span></span></span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify">&nbsp;</p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">Master</span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">机器主要配置<span lang="EN-US">NameNode</span>和<span lang="EN-US">JobTracker</span>的角色，负责总管分布式数据和分解任务的执行；<span lang="EN-US">3</span>个<span lang="EN-US">Salve</span>机器配置<span lang="EN-US">DataNode </span>和<span lang="EN-US">TaskTracker</span>的角色，负责分布式数据存储以及任务的执行。其实应该还应该有<span lang="EN-US">1</span>个<span lang="EN-US">Master</span>机器，用来作为<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">备用</span></span></strong>，以防止<span lang="EN-US">Master</span>服务器<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">宕机</span></span></strong>，还有一个备用马上启用。后续经验积累一定阶段后<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">补上</span></span></strong>一台备用<span lang="EN-US">Master</span>机器（可通过配置文件修改备用机器数）。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="color: #ff0000;"><span style="mso-bidi-font-size: 10.0pt; mso-hansi-font-family: 宋体;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: Times New Roman;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="font-size: 12pt;"><span style="font-family: 宋体;"><strong><span style="mso-bidi-font-size: 10.0pt; mso-ascii-font-family: 'Times New Roman';">注意：</span></strong><span style="mso-bidi-font-size: 10.0pt; mso-ascii-font-family: 'Times New Roman';">由于</span></span><span style="mso-bidi-font-size: 10.0pt; mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;">hadoop</span></span><span style="mso-bidi-font-size: 10.0pt; mso-ascii-font-family: 'Times New Roman';"><span style="font-family: 宋体;">要求所有机器上</span></span><span style="mso-bidi-font-size: 10.0pt; mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;">hadoop</span></span><span style="mso-bidi-font-size: 10.0pt; mso-ascii-font-family: 'Times New Roman';"><span style="font-family: 宋体;">的<strong style="mso-bidi-font-weight: normal;">部署目录结构要求相同（因为在启动时按与主节点相同的目录启动其它任务节点）</strong>，并且都有一个<strong>相同</strong>的用户名账户。参考各种文档上说的是所有机器都建立一个</span></span><span style="mso-bidi-font-size: 10.0pt; mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;">hadoop</span></span><span style="mso-bidi-font-size: 10.0pt; mso-ascii-font-family: 'Times New Roman';"><span style="font-family: 宋体;">用户，使用这个账户来实现无密码认证。这里为了方便，分别在三台机器上都重新建立一个</span></span><span style="mso-bidi-font-size: 10.0pt; mso-hansi-font-family: 宋体;" lang="EN-US"><span style="font-family: Times New Roman;">hadoop</span></span></span><span style="mso-bidi-font-size: 10.0pt; mso-ascii-font-family: 'Times New Roman';"><span style="font-family: 宋体;"><span style="font-size: 12pt;">用户。</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">1.3 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">环境配置</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">Hadoop</span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">集群要按照<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US">1.2</span>小节</strong>表格所示进行配置，下面介绍如何修改机器名称和配置<span lang="EN-US">hosts</span>文件，以方便使用。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">注意：我的虚拟机都采用<span lang="EN-US">NAT</span>方式连接网络，<span lang="EN-US">IP</span>地址是自动分配的，所以这里就使用自动分配的<span lang="EN-US">IP</span>地址而未特地修改为某些<span lang="EN-US">IP</span>地址。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt; color: #3366ff;"> （<span lang="EN-US">1</span>）修改当前机器名称</span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">假定</span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">我们发现我们的机器的主机名不是我们想要的。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0; mso-list: l2 level1 lfo1;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt; mso-bidi-font-family: 宋体;" lang="EN-US"><span style="mso-list: ignore;"><span style="font-size: 12pt;">1）</span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">在<span lang="EN-US">Ubuntu</span>下修改机器名称</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">修改文件<strong><span lang="EN-US"><span style="color: #ff0000;">/etc/hostname</span></span></strong>里的值即可，修改成功后用<strong><span lang="EN-US"><span style="color: #ff0000;">hostname</span></span></strong>命令查看当前主机名是否设置成功。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182210340024.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image002[12]" src="http://images.cnitblog.com/blog/390583/201401/182210349236.png" alt="clip_image002[12]" width="318" height="105" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: Times New Roman;"><span style="font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-family: 宋体;"><span style="font-size: 12pt;">另外为了能正确解析主机名，最好也修改</span></span></span><span style="font-size: 12pt;"><strong><span lang="EN-US"><span style="color: #333399; font-family: Times New Roman;">/etc/hosts</span></span></strong></span><span style="mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-family: 宋体;"><span style="font-size: 12pt;">文件里对应的主机名</span></span></span><span lang="EN-US"> <br /><span style="mso-spacerun: yes;"><span style="font-family: Times New Roman;"><span style="font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><a href="http://images.cnitblog.com/blog/390583/201401/182210359082.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image003[12]" src="http://images.cnitblog.com/blog/390583/201401/182210373613.png" alt="clip_image003[12]" width="328" height="58" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0; mso-list: l2 level1 lfo1;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt; mso-bidi-font-family: 宋体;" lang="EN-US"><span style="mso-list: ignore;"><span style="font-size: 12pt;">2）</span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">在<span lang="EN-US">Fedora</span>下修改机器名称</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">通过对<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">/etc/sysconfig/network</span></span></strong>"</span>文件修改其中<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">HOSTNAME</span></span></strong>"</span>后面的值，改成我们规定的名称。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">命令：<strong><span lang="EN-US"><span style="color: #ff0000;">vi /etc/sysconfig/network</span></span></strong>，修改如下：</span></span><span lang="EN-US"><span style="font-size: 12pt;">         <br /></span><span style="mso-spacerun: yes;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span></span><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182210382200.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image004[12]" src="http://images.cnitblog.com/blog/390583/201401/182210391739.png" alt="clip_image004[12]" width="490" height="77" border="0" /></a>      <br /><span style="mso-spacerun: yes;"><span style="font-family: Times New Roman;"><span style="font-size: 10.5pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><a href="http://images.cnitblog.com/blog/390583/201401/182210400807.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image005[12]" src="http://images.cnitblog.com/blog/390583/201401/182210411277.png" alt="clip_image005[12]" width="478" height="81" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: Times New Roman;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="font-size: 12pt;"><span style="mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-family: 宋体;">同样为了能正确解析主机名，最好也修改</span></span><span style="font-family: Times New Roman;"><strong><span lang="EN-US"><span style="color: #0000ff;">/</span></span></strong><strong><span lang="EN-US"><span style="color: #333399;">etc/hosts</span></span></strong></span></span><span style="mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-family: 宋体;"><span style="font-size: 12pt;">文件里对应的主机名。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="font-size: 12pt;"><span><span style="color: #3366ff;">（<span lang="EN-US">2</span>）配置<span lang="EN-US">hosts</span>文件（</span></span><span><span style="color: #ff0000;">必须</span></span></span><span><span style="font-size: 12pt; color: #3366ff;">） </span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> <span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">/etc/hosts</span></span></strong>"</span>这个文件是用来配置主机将用的<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #ff0000;">DNS</span></span></strong>服务器信息，是记载<span lang="EN-US">LAN</span>内接续的各主机的对应<span lang="EN-US">[HostName<span style="mso-spacerun: yes;">&nbsp; </span>IP]</span>用的。当用户在进行网络连接时，首先查找该文件，寻找对应主机名对应的<span lang="EN-US">IP</span>地址。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 我们要测试两台机器之间知否连通，一般用<span lang="EN-US">"ping </span>机器的<span lang="EN-US">IP"</span>，如果想用<span lang="EN-US">"ping </span>机器的主机名<span lang="EN-US">"</span>发现找不见该名称的机器<span lang="EN-US">(</span>这也就是为什么在修改主机名的同时最好修改该文件中对应的主机名<span lang="EN-US">)</span>，解决的办法就是修改<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">/etc/hosts</span></span></strong>"</span>这个文件，通过把<span lang="EN-US">LAN</span>内的各主机的<span lang="EN-US">IP</span>地址和<span lang="EN-US">HostName</span>的<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">一一对应</span></span></strong>写入这个文件的时候，就可以解决问题。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 例如：机器为<span lang="EN-US">"Master.Hadoop:192.168.1.141"</span>对机器为<span lang="EN-US">"Salve1.Hadoop:192.168.1.142"</span>用命令<span lang="EN-US">"ping"</span>记性连接测试。测试结果如下：</span></span><span lang="EN-US"><span style="font-size: 12pt;">         <br /></span><span style="mso-spacerun: yes;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span></span><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182210424867.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image006[12]" src="http://images.cnitblog.com/blog/390583/201401/182210435173.png" alt="clip_image006[12]" width="509" height="223" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 从上图中的值，直接对<span lang="EN-US">IP</span>地址进行测试，能够<span lang="EN-US">ping</span>通，但是对主机名进行测试，发现没有<span lang="EN-US">ping</span>通，提示<span lang="EN-US">"unknown host&mdash;&mdash;</span>未知主机<span lang="EN-US">"</span>，这时查看<span lang="EN-US">"Master.Hadoop"</span>的<span lang="EN-US">"/etc/hosts"</span>文件内容会发现里面没有<span lang="EN-US">"192.168.1.142 <span style="mso-spacerun: yes;">&nbsp;</span>Slave1.Hadoop"</span>内容，故而本机器是无法对机器的主机名为<span lang="EN-US">"Slave1.Hadoop" </span>解析。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 在进行<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US">Hadoop</span>集群</strong>配置中，需要在<span lang="EN-US">"/etc/hosts"</span>文件中添加集群中所有机器的<span lang="EN-US">IP</span>与主机名，这样<span lang="EN-US">Master</span>与所有的<span lang="EN-US">Slave</span>机器之间不仅可以通过<span lang="EN-US">IP</span>进行通信，而且<strong><span><span style="color: #333399;">还可以通过主机名进行通信</span></span></strong>。所以在所有的机器上的<span lang="EN-US">"/etc/hosts"</span>文件中都要添加如下内容：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">192.168.1.141 Master.Hadoop</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">192.168.1.142 Slave1.Hadoop</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">192.168.1.137 Slave2.Hadoop</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">命令：<span lang="EN-US">vi /etc/hosts</span>，添加结果如下：</span></span><span lang="EN-US">       <br /></span></span><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182210475022.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image007[12]" src="http://images.cnitblog.com/blog/390583/201401/182210484709.png" alt="clip_image007[12]" width="443" height="117" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 现在我们在进行对机器为<span lang="EN-US">"Slave1.Hadoop"</span>的主机名进行<span lang="EN-US">ping</span>通测试，看是否能测试成功。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182210493302.jpg"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image009[12]" src="http://images.cnitblog.com/blog/390583/201401/182210502989.jpg" alt="clip_image009[12]" width="553" height="167" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 从上图中我们已经能用主机名进行<span lang="EN-US">ping</span>通了，说明我们刚才添加的内容，在局域网内能进行<span lang="EN-US">DNS</span>解析了，那么现在剩下的事儿就是在其余的<span lang="EN-US">Slave</span>机器上进行相同的配置。然后进行测试。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">1.4 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">所需软件</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt; color: #3366ff;">（<span lang="EN-US">1</span>）<span lang="EN-US">JDK</span>软件</span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">下载地址：</span><span style="text-decoration: underline;"><span lang="EN-US"><a href="http://www.oracle.com/technetwork/java/javase/index.html"><span><span style="font-size: 12pt; color: #0000ff;">http://www.oracle.com/technetwork/java/javase/index.html</span></span></a></span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">JDK</span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">版本：</span><span lang="EN-US"><span style="font-size: 12pt; color: #ff00ff;">jdk-7u25-linux-i586.tar.gz</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt; color: #3366ff;">（<span lang="EN-US">2</span>）<span lang="EN-US">Hadoop</span>软件</span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">下载地址：</span><span style="text-decoration: underline;"><span lang="EN-US"><a href="http://hadoop.apache.org/common/releases.html"><span><span style="font-size: 12pt; color: #0000ff;">http://hadoop.apache.org/common/releases.html</span></span></a></span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">Hadoop</span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">版本：</span><span lang="EN-US"><span style="font-size: 12pt; color: #ff00ff;">hadoop-1.1.2.tar.gz</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 8.7pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="font-size: 14pt;">2</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span><span style="font-size: 14pt;">、<span lang="EN-US">SSH</span>无密码验证配置</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> <span lang="EN-US">Hadoop</span>运行过程中需要管理远端<span lang="EN-US">Hadoop</span>守护进程，在<span lang="EN-US">Hadoop</span>启动以后，<span lang="EN-US">NameNode</span>是通过<span lang="EN-US">SSH</span>（<span lang="EN-US">Secure Shell</span>）来启动和停止各个<span lang="EN-US">DataNode</span>上的各种守护进程的。这就必须在节点之间执行指令的时候是不需要输入密码的形式，故我们需要配置<span lang="EN-US">SSH</span>运用无密码公钥认证的形式，这样<span lang="EN-US">NameNode</span>使用<span lang="EN-US">SSH</span>无密码登录并启动<span lang="EN-US">DataName</span>进程，同样原理，<span lang="EN-US">DataNode</span>上也能使用<span lang="EN-US">SSH</span>无密码登录到<span lang="EN-US"> NameNode</span>。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><strong><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #333399;"><span style="font-size: 12pt;">注意：</span></span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #ff0000;"><span style="font-size: 12pt;">如果你的<span lang="EN-US">Linux</span>没有安装<span lang="EN-US">SSH</span>，请首先安装</span><span lang="EN-US"><span style="font-size: 12pt;">SSH</span></span></span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="color: #ff0000;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">Ubuntu</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">下安装<span lang="EN-US">ssh</span>：</span><span lang="EN-US"><span style="font-size: 12pt;">sudo apt-get install openssh-server</span></span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="color: #ff0000;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">Fedora</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">下安装<span lang="EN-US">ssh</span>：</span><span lang="EN-US"><span style="font-size: 12pt;">yum install openssh-server</span></span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">2.1 SSH</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">基本原理和用法</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 0cm; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l1 level1 lfo2;" align="justify"><span style="font-family: 宋体;"><span style="color: #3366ff;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt; mso-bidi-font-family: 宋体;" lang="EN-US"><span style="mso-list: ignore;"><span style="font-size: 12pt;">1）</span></span></span></strong><span style="font-size: 12pt;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US">SSH</span></strong></span><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">基本原理</span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">SSH</span></span><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">之所以能够保证安全，原因在于它采用了公钥加密。过程如下：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">(1)</span></span><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">远程主机收到用户的登录请求，把自己的公钥发给用户。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">(2)</span></span><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">用户使用这个公钥，将登录密码加密后，发送回来。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">(3)</span></span><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">远程主机用自己的私钥，解密登录密码，如果密码正确，就同意用户登录。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="color: #3366ff;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">2</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">）<span lang="EN-US">SSH</span>基本用法</span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">假如用户名为<span lang="EN-US">java</span>，登录远程主机名为<span lang="EN-US">linux</span>，如下命令即可：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">$ ssh java@linux</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">SSH</span></span><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">的默认端口是<span lang="EN-US">22</span>，也就是说，你的登录请求会送进远程主机的<span lang="EN-US">22</span>端口。使用<span lang="EN-US">p</span>参数，可以修改这个端口，例如修改为<span lang="EN-US">88</span>端口，命令如下：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">$ ssh -p 88 java@linux</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="color: #ff0000;"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-size: 12pt;"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;">注意：如果出现错误提示：<span lang="EN-US">ssh: Could not resolve hostname linux: Name or service not known</span>，</span></span></span><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">则是因为<span lang="EN-US">linux</span>主机未添加进本主机的<span lang="EN-US">Name Service</span>中，故不能识别，需要在<span lang="EN-US">/etc/hosts</span>里添加进该主机及对应的<span lang="EN-US">IP</span>即可：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-weight: bold; mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">linux<span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp; </span>192.168.1.107</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">2.2 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">配置<span lang="EN-US">Master</span>无密码登录所有</span><span lang="EN-US"><span style="font-size: 12pt;">Salve</span></span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="color: #3366ff;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">1</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">）<span lang="EN-US">SSH</span>无密码原理</span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">Master</span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">（<span lang="EN-US">NameNode | JobTracker</span>）作为客户端，要实现无密码公钥认证，连接到服务器<span lang="EN-US">Salve</span>（<span lang="EN-US">DataNode | Tasktracker</span>）上时，需要在<span lang="EN-US">Master</span>上生成一个密钥对，包括一个公钥和一个私钥，而后将公钥复制到所有的<span lang="EN-US">Slave</span>上。当<span lang="EN-US">Master</span>通过<span lang="EN-US">SSH</span>连接<span lang="EN-US">Salve</span>时，<span lang="EN-US">Salve</span>就会生成一个随机数并用<span lang="EN-US">Master</span>的公钥对随机数进行加密，并发送给<span lang="EN-US">Master</span>。<span lang="EN-US">Master</span>收到加密数之后再用私钥解密，并将解密数回传给<span lang="EN-US">Slave</span>，<span lang="EN-US">Slave</span>确认解密数无误之后就允许<span lang="EN-US">Master</span>进行连接了。这就是一个公钥认证过程，其间不需要用户手工输入密码。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 0cm; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo3;" align="justify"><span style="font-family: 宋体;"><span style="color: #3366ff;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt; mso-bidi-font-family: 宋体;" lang="EN-US"><span style="mso-list: ignore;"><span style="font-size: 12pt;">2）</span></span></span></strong><span style="font-size: 12pt;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US">Master</span></strong></span><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">机器上设置无密码登录</span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">a. Master</span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">节点利用<span lang="EN-US">ssh-keygen</span>命令生成一个</span><strong style="mso-bidi-font-weight: normal;"><span><span style="font-size: 12pt; color: #ff0000;">无密码密钥对。</span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">在<span lang="EN-US">Master</span>节点上执行以下命令：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">ssh-keygen &ndash;t rsa &ndash;P ''</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 运行后询问其保存路径时<strong style="mso-bidi-font-weight: normal;">直接回车</strong>采用默认路径。生成的密钥对：<span lang="EN-US">id_rsa</span>（私钥）和<span lang="EN-US">id_rsa.pub</span>（公钥），默认存储在<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">/home/</span></span></strong></span><strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">用户名<span lang="EN-US">/.ssh</span></span></span></strong><span lang="EN-US">"</span>目录下。</span></span><span lang="EN-US"><span style="font-size: 12pt;">         <br /></span><span style="font-family: 宋体;"><span style="font-size: 12pt;"><span style="mso-spacerun: yes;">&nbsp;&nbsp; </span></span><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp; </span></span></span></span></span><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182210515029.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image010[12]" src="http://images.cnitblog.com/blog/390583/201401/182210528619.png" alt="clip_image010[12]" width="538" height="327" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 查看<span lang="EN-US">"/home/</span>用户名<span lang="EN-US">/"</span>下是否有<span lang="EN-US">".ssh"</span>文件夹，且<span lang="EN-US">".ssh"</span>文件下是否有两个刚生产的无密码密钥对。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: Times New Roman;"><span style="font-size: 10.5pt;">&nbsp;&nbsp;&nbsp; </span></span></span><a href="http://images.cnitblog.com/blog/390583/201401/182210546899.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image011[12]" src="http://images.cnitblog.com/blog/390583/201401/182210555174.png" alt="clip_image011[12]" width="405" height="156" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">b. </span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">接着在<span lang="EN-US">Master</span>节点上做如下配置，把<span lang="EN-US">id_rsa.pub</span>追加到授权的<span lang="EN-US">key</span>里面去。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182210564089.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image012[12]" src="http://images.cnitblog.com/blog/390583/201401/182210574559.png" alt="clip_image012[12]" width="401" height="123" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><span style="mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: 12pt;">查看下</span></span><span style="font-size: 12pt;"><span lang="EN-US">authorized_keys</span></span><span><span style="font-size: 12pt;">的权限，如果权限不对则利用如下命令设置该文件的权限：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><span lang="EN-US"><span style="font-size: 12pt;">chmod 600 </span></span><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">authorized_keys</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">c. </span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">用<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #ff0000;">root</span></span></strong>用户登录修改<span lang="EN-US">SSH</span>配置文件<span lang="EN-US">"<span><span style="color: #ff00ff;">/etc/ssh/sshd_config</span></span>"</span>的下列内容。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">检查下面几行前面<span lang="EN-US">&rdquo;#&rdquo;</span>注释是否取消掉：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">RSAAuthentication yes # </span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">启用<span lang="EN-US"> RSA </span>认证</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">PubkeyAuthentication yes # </span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">启用公钥私钥配对认证方式</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">AuthorizedKeysFile <span style="mso-spacerun: yes;">&nbsp;</span>%h/.ssh/authorized_keys # </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;"><span style="font-family: 宋体;">公钥文件路径</span></span><span lang="EN-US"><span style="font-size: 12pt;">         <br /></span><span style="mso-spacerun: yes;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span></span><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182210582671.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image013[12]" src="http://images.cnitblog.com/blog/390583/201401/182210592200.png" alt="clip_image013[12]" width="446" height="172" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 设置完之后记得<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">重启<span lang="EN-US">SSH</span>服务</span></span></strong>，才能使刚才设置有效。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-size: 12pt;"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211004864.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image014[12]" src="http://images.cnitblog.com/blog/390583/201401/182211015809.png" alt="clip_image014[12]" width="403" height="33" border="0" /></a></span></span><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24.1pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #ff0000;"><span style="font-size: 12pt;">退出<span lang="EN-US">root</span>登录</span></span></span></strong><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">，使用普通用户验证是否设置成功。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211028309.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image015[12]" src="http://images.cnitblog.com/blog/390583/201401/182211039081.png" alt="clip_image015[12]" width="467" height="208" border="0" /></a></span><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&nbsp;</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">从上图中得知无密码登录本级已经设置完毕，接下来的事儿是把<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">公钥</span></span></strong>复制</span><strong style="mso-bidi-font-weight: normal;"><span><span style="font-size: 12pt; color: #0000ff;">所</span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #0000ff;"><span style="font-size: 12pt;">有</span></span></span></strong><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">的<span lang="EN-US"><span style="color: #ff00ff;">Slave</span></span>机器上。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">注意：有时候在测试时可能会出现错误：<span lang="EN-US"> Agent admitted failure to sign using the key.</span>解决办法是：<span lang="EN-US">ssh-add<span style="mso-spacerun: yes;">&nbsp;&nbsp; </span>~/.ssh/id_rsa </span>，如下所示：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: Times New Roman;"><span style="font-size: 10.5pt;">&nbsp;&nbsp; </span></span></span><a href="http://images.cnitblog.com/blog/390583/201401/182211079088.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image016[12]" src="http://images.cnitblog.com/blog/390583/201401/182211102672.png" alt="clip_image016[12]" width="528" height="310" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">ｄ．使用<span lang="EN-US">ssh-copy-id</span>命令将公钥传送到远程主机上<span lang="EN-US">(</span>这里以<span lang="EN-US">Slave1.Hadoop</span>为例<span lang="EN-US">)</span>。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211113929.jpg"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image018[12]" src="http://images.cnitblog.com/blog/390583/201401/182211122982.jpg" alt="clip_image018[12]" width="553" height="164" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">e. </span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">测试是否无密码登录其它机器成功。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211162989.jpg"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image020[12]" src="http://images.cnitblog.com/blog/390583/201401/182211172523.jpg" alt="clip_image020[12]" width="553" height="295" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">到此为止，我们经过<span lang="EN-US">5</span>步已经实现了从<span lang="EN-US">"<span><span style="color: #0000ff;">Master</span></span>.Hadoop"</span>到<span lang="EN-US">"<span><span style="color: #ff00ff;">Slave1</span></span>.Hadoop"SSH</span>无密码登录，下面就是重复上面的步骤把剩余的两台（<span lang="EN-US"><span style="color: #ff00ff;">Slave2</span></span><span lang="EN-US">.Hadoop</span>和<span lang="EN-US"><span style="color: #ff00ff;">Slave3</span></span><span lang="EN-US">.Hadoop</span>）<span lang="EN-US">Slave</span>服务器进行配置。<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">这样</span></span></strong>，我们就完成了<span lang="EN-US">"</span>配置<span lang="EN-US"><span style="color: #0000ff;">Master</span></span>无密码登录所有的<span lang="EN-US"><span style="color: #ff00ff;">Slave</span></span>服务器<span lang="EN-US">"</span>。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24.1pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">接下来配置所有<span lang="EN-US">Slave</span>无密码登录<span lang="EN-US">Master</span>，其</span></span></strong><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">和<span lang="EN-US">Master</span>无密码登录所有<span lang="EN-US">Slave</span>原理一样，就是把<span lang="EN-US">Slave</span>的公钥<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">追加</span></span></strong>到<span lang="EN-US">Master</span>的<span lang="EN-US">".ssh"</span>文件夹下的<span lang="EN-US">"authorized_keys"</span>中，记得是<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">追加（<span lang="EN-US">&gt;&gt;</span>）</span></span></strong>。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="color: #ff0000;"><strong><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">注意</span></span></strong><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">：期间可能会出现一些问题如下：</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">（<span lang="EN-US">1</span>）如果在<span lang="EN-US">ssh</span>连接时出现错误&ldquo;<span lang="EN-US">ssh</span>：<span lang="EN-US">connect to host port 22</span>：<span lang="EN-US"> Connection refused</span>&rdquo;，如下图所示：</span></span><span lang="EN-US">       <br /></span></span><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211213610.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image021[12]" src="http://images.cnitblog.com/blog/390583/201401/182211224392.png" alt="clip_image021[12]" width="529" height="87" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-family: 宋体;"><span style="font-size: 12pt;">则可能是因为远程登录的那台机器没有安装</span></span></span><span style="font-size: 12pt;"><span lang="EN-US"><span style="font-family: Times New Roman;">ssh</span></span><span style="mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-family: 宋体;">服务或安装了没有开启</span></span><span lang="EN-US"><span style="font-family: Times New Roman;">ssh</span></span><span style="mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-family: 宋体;">服务，下面到</span></span><span lang="EN-US"><span style="font-family: Times New Roman;">Slave3.Hadoop</span></span></span><span style="mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-family: 宋体;"><span style="font-size: 12pt;">主机进行测试：</span></span></span><span lang="EN-US">     <br /></span><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211233143.jpg"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image023[12]" src="http://images.cnitblog.com/blog/390583/201401/182211244088.jpg" alt="clip_image023[12]" width="553" height="198" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: 12pt;">为了一劳永逸，设置</span></span><span style="font-size: 12pt;"><span lang="EN-US"><a href="http://www.2cto.com/os/"><span style="text-underline: none; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';" lang="EN-US"><span lang="EN-US"><span style="color: #000000;"><span style="text-decoration: none;">系统</span></span></span></span></a></span><span style="mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">启动时开启服务：</span></span></span><span lang="EN-US"><span style="font-family: Times New Roman;"><span style="font-size: 12pt;"># systemctl enable sshd.service</span></span>      <br /></span><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211251111.jpg"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image025[12]" src="http://images.cnitblog.com/blog/390583/201401/182211260486.jpg" alt="clip_image025[12]" width="553" height="51" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 0cm; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l3 level1 lfo4;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt; mso-bidi-font-family: 宋体;" lang="EN-US"><span style="mso-list: ignore;"><span style="font-size: 12pt;">（2）</span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">如果在用命令<span lang="EN-US">ssh-copy-id</span>时发现找不到该命令&ldquo;<span style="color: #ff0000;"><span lang="EN-US">ssh-copy-id</span><span>：<span lang="EN-US">Command not found</span></span></span>&rdquo;，则可能是<span lang="EN-US">ssh</span>服务的版本太低的原因，比如若你的机器是<span lang="EN-US">Redhat</span>系统就可能该问题，解决办法是：手动复制本地的<span lang="EN-US">pubkey</span>内容到远程服务器，命令如下：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;</span></span><span style="font-size: 12pt;">cat ~/.ssh/id_rsa.pub | ssh hadoop@Master.Hadoop 'cat &gt;&gt; ~/.ssh/authorized_keys'</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">该命令等价于下面两个命令：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">①在本地机器上执行：</span><span lang="EN-US"><span style="font-size: 12pt;">scp ~/.ssh/id_rsa.pub hadoop@Master.Hadoop:/~</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">②到远程机器上执行：</span><span lang="EN-US"><span style="font-size: 12pt;">cat ~/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211278929.jpg"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image027[12]" src="http://images.cnitblog.com/blog/390583/201401/182211289701.jpg" alt="clip_image027[12]" width="553" height="293" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 8.7pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="font-size: 14pt;">3</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span><span style="font-size: 14pt;">、<span lang="EN-US">Java</span>环境安装</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 所有的机器上都要安装<span lang="EN-US">JDK</span>，现在就先在<span lang="EN-US">Master</span>服务器安装，然后其他服务器按照步骤重复进行即可。安装<span lang="EN-US">JDK</span>以及配置环境变量，需要以<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">root</span></span></strong>"</span>的身份进行。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">3.1 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">安装</span><span lang="EN-US"><span style="font-size: 12pt;">JDK</span></span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">首先用<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #ff0000;">root</span></span></strong>身份登录<span lang="EN-US">"Master.Hadoop"</span>后在<span lang="EN-US">"/usr"</span>下创建<span lang="EN-US">"java"</span>文件夹，再将<span lang="EN-US">"jdk-7u25-linux-i586.tar.gz"</span>复制到<span lang="EN-US">"/usr/java"</span>文件夹中，然后解压即可。查看<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">/usr/java</span></span></strong>"</span>下面会发现多了一个名为<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">jdk1.7.0_25</span></span></strong>"</span>文件夹，说明我们的<span lang="EN-US">JDK</span>安装结束，删除<span lang="EN-US">"jdk-7u25-linux-i586.tar.gz"</span>文件，进入下一个<span lang="EN-US">"</span>配置环境变量<span lang="EN-US">"</span>环节。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">3.2 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">配置环境变量</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt; color: #3366ff;">（<span lang="EN-US">1</span>）编辑<span lang="EN-US">"/etc/profile"</span>文件</span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">编辑<span lang="EN-US">"/etc/profile"</span>文件，在后面添加<span lang="EN-US">Java</span>的<span lang="EN-US">"JAVA_HOME"</span>、<span lang="EN-US">"CLASSPATH"</span>以及<span lang="EN-US">"PATH"</span>内容如下：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;"># set java environment</span></span></span></p>
<p>export JAVA_HOME=/usr/java/jdk1.7.0_25/</p>
<p>export JRE_HOME=/usr/java/jdk1.7.0_25/jre</p>
<p>export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib</p>
<p>export PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">或者</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;"># set java environment</span></span></span></p>
<p>export JAVA_HOME=/usr/java/jdk1.7.0_25/</p>
<p>export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib</p>
<p>export PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin</p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">以上两种意思一样，那么我们就选择<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">第<span lang="EN-US">1</span>种</span></span></strong>来进行设置。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211301890.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image028[12]" src="http://images.cnitblog.com/blog/390583/201401/182211312369.png" alt="clip_image028[12]" width="482" height="142" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt; color: #3366ff;">（<span lang="EN-US">2</span>）使配置生效</span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">保存并退出，执行下面命令使其配置立即生效。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">source /etc/profile </span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">或</span><span lang="EN-US"><span style="font-size: 12pt;"> . /etc/profile</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211320481.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image029[11]" src="http://images.cnitblog.com/blog/390583/201401/182211332521.png" alt="clip_image029[11]" width="375" height="53" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">3.3 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">验证安装成功</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">配置完毕并生效后，用下面命令判断是否成功。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">java -version</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211432207.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image030[11]" src="http://images.cnitblog.com/blog/390583/201401/182211448308.png" alt="clip_image030[11]" width="461" height="88" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">从上图中得知，我们确定<span lang="EN-US">JDK</span>已经安装成功。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">3.4 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">安装剩余机器</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 这时用<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">普通用户<span lang="EN-US">hadoop</span></span></span></strong>通过<span lang="EN-US">scp</span>命令格式把<span lang="EN-US">"/usr/java/"</span>文件复制到其他<span lang="EN-US">Slave</span>上面，剩下的事儿就是在其余的<span lang="EN-US">Slave</span>服务器上按照上图的步骤配置环境变量和测试是否安装成功，这里以<span lang="EN-US">Slave1.Master</span>为例：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">scp -r /usr/java seed@Slave1.Master:/usr/</span><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp; </span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><strong><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #ff0000;"><span style="font-size: 12pt;">注意：</span></span></span></strong><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">有的机器库函数版本较低，可能安装不了高版本的<span lang="EN-US">JDK</span>，比如有些<span lang="EN-US">Redhat9</span>，<span><span style="color: #ff0000;">此时不可以选择较低版本的<span lang="EN-US">JDK</span>进行安装</span></span>，<span><span style="color: #ff0000;">因为<strong style="mso-bidi-font-weight: normal;">所有集群中的<span lang="EN-US">JDK</span>版本必须相同（经过测试）</strong></span></span>，有两种方法可解决：一是放弃该机器，选用另一台能装该版本的<span lang="EN-US">JDK</span>的机子；二是选择低版本的<span lang="EN-US">JDK</span>，在所有机器上重新安装。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 8.7pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="font-size: 14pt;">4</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span><span style="font-size: 14pt;">、<span lang="EN-US">Hadoop</span>集群安装</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 所有的机器上都要安装<span lang="EN-US">hadoop</span>，现在就先在<span lang="EN-US">Master</span>服务器安装，然后其他服务器按照步骤重复进行即可。安装和配置<span lang="EN-US">hadoop</span>需要以<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">root</span></span></strong>"</span>的身份进行。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">4.1 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">安装</span><span lang="EN-US"><span style="font-size: 12pt;">hadoop</span></span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 首先用<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #ff0000;">root</span></span></strong>用户登录<span lang="EN-US">"Master.Hadoop"</span>机器，将下载的<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">hadoop-1.1.2.tar.gz</span></span></strong>"</span>复制到<strong><span lang="EN-US">/usr</span></strong>目录下。然后进入<span lang="EN-US">"/usr"</span>目录下，用下面命令把<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">hadoop-1.1.2.tar.gz</span></span></strong>"</span>进行解压，并将其重命名为<span lang="EN-US">"hadoop"</span>，把该文件夹的<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">读权限</span></span></strong>分配给普通用户<span lang="EN-US">hadoop</span>，然后删除<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">hadoop-1.0.0.tar.gz</span></span></strong>"</span>安装包。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">cd /usr </span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">tar &ndash;xzvf hadoop-1.1.2.tar.gz </span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">mv hadoop-1.1.2 hadoop </span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">chown <strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">&ndash;R</span></span></strong> hadoop:hadoop hadoop #</span></span><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt; color: #ff0000;">将文件夹<span lang="EN-US">"hadoop"</span>读权限分配给<span lang="EN-US">hadoop</span>普通用户</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">rm -rf hadoop-1.1.2.tar.gz </span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 最后在<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">/usr/hadoop</span></span></strong>"</span>下面创建<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #ff0000;">tmp</span></span></strong>文件夹，并把<span lang="EN-US">Hadoop</span>的安装路径添加到<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">/etc/profile</span></span></strong>"</span>中，修改<span lang="EN-US">"/etc/profile"</span>文件，将以下语句添加到<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">末尾</span></span></strong>，并使其生效<span lang="EN-US">(. /etc/profile)</span>：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;"># set hadoop path</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">export HADOOP_HOME=/usr/hadoop</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">export PATH=$PATH :$HADOOP_HOME/bin</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211464557.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image031[11]" src="http://images.cnitblog.com/blog/390583/201401/182211476894.png" alt="clip_image031[11]" width="494" height="212" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">4.2 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">配置</span><span lang="EN-US"><span style="font-size: 12pt;">hadoop</span></span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="color: #3366ff;"><span style="font-size: 12pt;">（<span lang="EN-US">1</span>）配置</span><span lang="EN-US"><span style="font-size: 12pt;">hadoop-env.sh</span></span></span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">该<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">hadoop-env.sh</span></span></strong>"</span>文件位于<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">/usr/hadoop/conf</span></span></strong>"</span>目录下。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">在文件中修改下面内容：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">export JAVA_HOME=/usr/java/jdk1.7.0_25</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211489860.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image032[11]" src="http://images.cnitblog.com/blog/390583/201401/182211500954.png" alt="clip_image032[11]" width="454" height="173" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> <span lang="EN-US">Hadoop</span>配置文件在<span lang="EN-US">conf</span>目录下，之前的版本的配置文件主要是<span lang="EN-US">Hadoop-default.xml</span>和<span lang="EN-US">Hadoop-site.xml</span>。 由于<span lang="EN-US">Hadoop</span>发展迅速，代码量急剧增加，代码开发分为了<span lang="EN-US">core</span>，<span lang="EN-US">hdfs</span>和<span lang="EN-US">map/reduce</span>三部分，配置文件也被分成了三个<span lang="EN-US">core- site.xml</span>、<span lang="EN-US">hdfs-site.xml</span>、<span lang="EN-US">mapred-site.xml</span>。<span lang="EN-US">core-site.xml</span>和<span lang="EN-US">hdfs-site.xml</span>是站在<span lang="EN-US"> HDFS</span>角度上配置文件；<span lang="EN-US">core-site.xml</span>和<span lang="EN-US">mapred-site.xml</span>是站在<span lang="EN-US">MapReduce</span>角度上配置文件。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;</span></span><span style="font-size: 12pt;"><strong style="mso-bidi-font-weight: normal;"><span><span style="color: #3366ff;">(2</span></span></strong></span></span><span style="font-size: 12pt;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #3366ff;">）配置</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="color: #ff0000;">core-site.xml</span></span></strong></span><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt; color: #3366ff;">文件 </span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 修改<span lang="EN-US">Hadoop</span>核心配置文件<span lang="EN-US">core-site.xml</span>，这里配置的是<span lang="EN-US">HDFS master</span>（即<span lang="EN-US">namenode</span>）的地址和端口号。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&lt;configuration&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;property&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp; </span></span><span style="font-size: 12pt;"><span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;value&gt;/usr/hadoop/tmp&lt;/value&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">（<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">备注：</span></span></strong>请先在<span lang="EN-US"> /usr/hadoop </span>目录下建立<span lang="EN-US"> tmp </span>文件夹）</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;description&gt;A base for other temporary directories.&lt;/description&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;/property&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&lt;!-- file system properties --&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;property&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;name&gt;fs.default.name&lt;/name&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;</span></span><span style="font-size: 12pt;"><span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;value&gt;hdfs://<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">192.168.1.141</span></span></strong>:<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">9000</span></span></strong>&lt;/value&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;/property&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&lt;/configuration&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #ff0000;"><span style="font-size: 12pt;"> 备注：</span></span></span></strong><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">如没有配置<span lang="EN-US">hadoop.tmp.dir</span>参数，此时系统默认的临时目录为：<span lang="EN-US">/tmp/hadoo-hadoop</span>。而这个目录在每次重启后都会被删掉，必须重新执行<span lang="EN-US">format</span>才行，否则会出错。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211516277.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image033[11]" src="http://images.cnitblog.com/blog/390583/201401/182211534393.png" alt="clip_image033[11]" width="574" height="302" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #3366ff;"><span style="font-size: 12pt;">（<span lang="EN-US">3</span>）配置</span></span></span></strong><span style="font-size: 12pt;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="color: #ff0000;">hdfs-site.xml</span></span></strong></span><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt; color: #3366ff;">文件 </span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 修改<span lang="EN-US">Hadoop</span>中<span lang="EN-US">HDFS</span>的配置，配置的备份方式默认为<span lang="EN-US">3</span>。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&lt;configuration&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;property&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;name&gt;dfs.replication&lt;/name&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;value&gt;<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">1</span></span></strong>&lt;/value&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">(</span></span><span style="font-size: 12pt;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #ff0000;">备注：</span></span></strong><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US">replication </span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">是数据副本数量，默认为<span lang="EN-US">3</span>，<span lang="EN-US">salve</span>少于<span lang="EN-US">3</span>台就会报错</span><span lang="EN-US"><span style="font-size: 12pt;">)</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;/property&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&lt;configuration&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&nbsp;</span></span></span></span><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211548147.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image034[11]" src="http://images.cnitblog.com/blog/390583/201401/182211561588.png" alt="clip_image034[11]" width="520" height="209" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #3366ff;"><span style="font-size: 12pt;">（<span lang="EN-US">4</span>）配置</span></span></span></strong><span style="font-size: 12pt;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="color: #ff0000;">mapred-site.xml</span></span></strong></span><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt; color: #3366ff;">文件 </span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 修改<span lang="EN-US">Hadoop</span>中<span lang="EN-US">MapReduce</span>的配置文件，配置的是<span lang="EN-US">JobTracker</span>的地址和端口。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&lt;configuration&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;property&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;name&gt;mapred.job.tracker&lt;/name&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;value&gt;http://<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">192.168.1.141</span></span></strong>:<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">9001</span></span></strong>&lt;/value&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">&lt;/property&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&lt;/configuration&gt;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182211581275.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image035[11]" src="http://images.cnitblog.com/blog/390583/201401/182211594553.png" alt="clip_image035[11]" width="498" height="204" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt; color: #3366ff;">（<span lang="EN-US">5</span>）配置<span lang="EN-US">masters</span>文件</span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 有两种方案：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">（<span lang="EN-US">1</span>）第一种</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">修改<span lang="EN-US">localhost</span>为</span><span lang="EN-US"><span style="font-size: 12pt;">Master.Hadoop</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">（<span lang="EN-US">2</span>）第二种</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">去掉<span lang="EN-US">"localhost"</span>，加入<span lang="EN-US">Master</span>机器的<span lang="EN-US">IP</span>：</span><span lang="EN-US"><span style="font-size: 12pt;">192.168.1.141</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">为保险起见，启用第二种，因为万一忘记配置<span lang="EN-US">"/etc/hosts"</span>局域网的<span lang="EN-US">DNS</span>失效，这样就会出现意想不到的错误，但是一旦<span lang="EN-US">IP</span>配对，网络畅通，就能通过<span lang="EN-US">IP</span>找到相应主机。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212008771.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image036[11]" src="http://images.cnitblog.com/blog/390583/201401/182212020643.png" alt="clip_image036[11]" width="386" height="69" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #3366ff;"><span style="font-size: 12pt;">（<span lang="EN-US">6</span>）配置<span lang="EN-US">slaves</span>文件（</span></span></span></strong><span style="font-size: 12pt;"><span style="color: #ff0000;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US">Master</span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;">主机特有</span></strong></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt; color: #3366ff;">）</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">有两种方案：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">（<span lang="EN-US">1</span>）第一种</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">去掉<span lang="EN-US">"localhost"</span>，每行添加一个主机名，把剩余的<span lang="EN-US">Slave</span>主机名都填上。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp; </span></span><span style="font-size: 12pt;"><span style="mso-spacerun: yes;">&nbsp;</span><span style="mso-spacerun: yes;">&nbsp;</span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">例如：添加形式如下：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">Slave1.Hadoop</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">Slave2.Hadoop</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">（<span lang="EN-US">2</span>）第二种</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">去掉<span lang="EN-US">"localhost"</span>，加入集群中所有<span lang="EN-US">Slave</span>机器的<span lang="EN-US">IP</span>，也是每行一个。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">例如：添加形式如下</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">192.168.1.142</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">192.168.1.137</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 原因和添加<span lang="EN-US">"masters"</span>文件一样，选择第二种方式。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212042058.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image037[11]" src="http://images.cnitblog.com/blog/390583/201401/182212058921.png" alt="clip_image037[11]" width="400" height="78" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 现在在<span lang="EN-US">Master</span>机器上的<span lang="EN-US">Hadoop</span>配置就结束了，剩下的就是配置<span lang="EN-US">Slave</span>机器上的<span lang="EN-US">Hadoop</span>。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #ff0000;"><span style="font-size: 12pt;"> 最简单的方法是</span></span></span></strong><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">将<span lang="EN-US"> Master</span>上配置好的<span lang="EN-US">hadoop</span>所在文件夹<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">/usr/</span></span><span><span style="color: #ff0000;">hadoop</span></span></strong><span><span style="color: #0000ff;">"</span></span></span><span><span style="color: #0000ff;">复制到所有的</span></span><span lang="EN-US">Slave</span>的<span lang="EN-US">"/usr"</span>目录下（实际上<span lang="EN-US">Slave</span>机器上的<span lang="EN-US">slavers</span>文件是不必要的， 复制了也没问题）。用下面命令格式进行。（<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">备注：</span></span></strong>此时用户可以为普通用户也可以为<span lang="EN-US">root</span>）</span><span lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">scp <strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">-r</span></span></strong> /usr/hadoop <strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">root</span></span></strong>@</span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">服务器</span><span lang="EN-US"><span style="font-size: 12pt;">IP:/usr/</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">例如：从<span lang="EN-US">"Master.Hadoop"</span>到<span lang="EN-US">"Slave1.Hadoop"</span>复制配置<span lang="EN-US">Hadoop</span>的文件。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">scp <strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">-r</span></span></strong> /usr/hadoop <strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">root</span></span></strong>@Slave1.Hadoop:/usr/</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">以<span lang="EN-US">root</span>用户进行复制，当然不管是用户<span lang="EN-US">root</span>还是普通用户，虽然<span lang="EN-US">Master</span>机器上的<span lang="EN-US">"/usr/hadoop"</span>文件夹用户<span lang="EN-US">hadoop</span>有权限，但是<span lang="EN-US">Slave1</span>上的<span lang="EN-US">hadoop</span>用户却没有<span lang="EN-US">"/usr"</span>权限，所以没有创建文件夹的权限。所以无论是哪个用户进行拷贝，<strong><span><span style="color: #ff0000;">右面都是<span lang="EN-US">"root@</span>机器<span lang="EN-US"> IP"</span>格式</span></span></strong>。因为我们只是建立起了普通用户的<span lang="EN-US">SSH</span>无密码连接，所以用<span lang="EN-US">root</span>进行<span lang="EN-US">"scp"</span>时，扔提示让你输入<span lang="EN-US">"Slave1.Hadoop" </span>服务器用户<span lang="EN-US">root</span>的密码。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212075334.jpg"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image039[11]" src="http://images.cnitblog.com/blog/390583/201401/182212083922.jpg" alt="clip_image039[11]" width="554" height="35" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">查看<span lang="EN-US">"Slave1.Hadoop"</span>服务器的<span lang="EN-US">"/usr"</span>目录下是否已经存在<span lang="EN-US">"hadoop"</span>文件夹，确认已经复制成功。查看结果如下：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212094555.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image040[11]" src="http://images.cnitblog.com/blog/390583/201401/182212104084.png" alt="clip_image040[11]" width="461" height="75" border="0" /></a></span><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&nbsp;</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 从上图中知道，<span lang="EN-US">hadoop</span>文件夹确实已经复制了，但是我们发现<span lang="EN-US">hadoop</span>权限是<span lang="EN-US">root</span>，所以我们现在要给<span lang="EN-US">"Slave1.Hadoop"</span>服务器上的用户<span lang="EN-US">hadoop</span>添加对<span lang="EN-US">"/usr/hadoop"</span>读权限。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 以<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #ff0000;">root</span></span></strong>用户登录<span lang="EN-US">"Slave1.Hadoop"</span>，执行下面命令。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">chown <strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">-R</span></span></strong> hadoop:hadoop</span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">（<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff00ff;">用户名：用户组</span></span></strong>）<span lang="EN-US"> hadoop</span>（<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">文件夹</span></span></strong>）</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 接着在<span lang="EN-US">"Slave1 .Hadoop"</span>上修改<span lang="EN-US">"/etc/profile"</span>文件，将以下语句添加到末尾，并使其有效（<span lang="EN-US">source /etc/profile</span>）：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;"># set hadoop environment</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">export HADOOP_HOME=/usr/hadoop</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">export PATH=$PATH :$HADOOP_HOME/bin</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 如果不知道怎么设置，可以查看前面<span lang="EN-US">"Master.Hadoop"</span>机器的<span lang="EN-US">"/etc/profile"</span>文件的配置，到此为止在一台<span lang="EN-US">Slave</span>机器上的<span lang="EN-US">Hadoop</span>配置就结束了。剩下的事儿就是照葫芦画瓢把剩余的几台<span lang="EN-US">Slave</span>机器进行部署<span lang="EN-US">Hadoop</span>。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">4.3 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">启动及验证</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #3366ff;"><span style="font-size: 12pt;">（<span lang="EN-US">1</span>）格式化</span></span></span></strong><span style="font-size: 12pt;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="color: #ff00ff;">HDFS</span></span></strong></span><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt; color: #3366ff;">文件系统 </span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 在<span lang="EN-US">"Master.Hadoop"</span>上使用<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">普通</span></span></strong>用户<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #ff0000;">hadoop</span></span></strong>进行操作。（<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">备注：</span></span></strong>只需一次，下次启动不再需要格式化，只需<span lang="EN-US"> start-all.sh</span>）</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">hadoop namenode -format</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212124558.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image041[11]" src="http://images.cnitblog.com/blog/390583/201401/182212154085.png" alt="clip_image041[11]" width="577" height="570" border="0" /></a></span><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&nbsp;</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 从上图中知道我们已经成功格式化了，但是美中不足就是出现了一个<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">警告</span></span></strong>，从网上得知这个警告并不影响<span lang="EN-US">hadoop</span>执行，但是也有办法解决，详情看后面的<span lang="EN-US">"</span>常见问题<span lang="EN-US">FAQ"</span>。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="color: #3366ff;"><span style="font-size: 12pt;">（<span lang="EN-US">2</span>）启动</span><span lang="EN-US"><span style="font-size: 12pt;">hadoop</span></span></span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 在启动前关闭集群中所有机器的防火墙，不然会出现<span lang="EN-US">datanode</span>开后又自动关闭。使用下面命令启动。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">start-all.sh </span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212174084.jpg"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image043[11]" src="http://images.cnitblog.com/blog/390583/201401/182212183924.jpg" alt="clip_image043[11]" width="553" height="278" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">可以通过以下启动日志看出，首先启动<span lang="EN-US">namenode </span>接着启动<span lang="EN-US">datanode1</span>，<span lang="EN-US">datanode2</span>，<span lang="EN-US">&hellip;</span>，然后启动<span lang="EN-US">secondarynamenode</span>。再启动<span lang="EN-US">jobtracker</span>，然后启动<span lang="EN-US">tasktracker1</span>，<span lang="EN-US">tasktracker2</span>，<span lang="EN-US">&hellip;</span>。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 启动<span lang="EN-US"> hadoop</span>成功后，在<span lang="EN-US"> Master </span>中的<span lang="EN-US"> tmp </span>文件夹中生成了<span lang="EN-US"> dfs </span>文件夹，在<span lang="EN-US">Slave </span>中的<span lang="EN-US"> tmp </span>文件夹中均生成了<span lang="EN-US"> dfs </span>文件夹和<span lang="EN-US"> mapred </span>文件夹。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="color: #3366ff;"><span style="font-size: 12pt;">（<span lang="EN-US">3</span>）验证</span><span lang="EN-US"><span style="font-size: 12pt;">hadoop</span></span></span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> （<span lang="EN-US">1</span>）验证方法一：用<span lang="EN-US">"jps"</span>命令</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">在<span lang="EN-US">Master</span>上用<span lang="EN-US"> java</span>自带的小工具<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #ff0000;">jps</span></span></strong>查看进程。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212195023.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image044[11]" src="http://images.cnitblog.com/blog/390583/201401/182212204086.png" alt="clip_image044[11]" width="412" height="141" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 24pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">在<span lang="EN-US">Slave2</span>上用<span lang="EN-US">jps</span>查看进程。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; text-indent: 21pt; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-char-indent-count: 2.0;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212215482.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image045[12]" src="http://images.cnitblog.com/blog/390583/201401/182212229553.png" alt="clip_image045[12]" width="386" height="95" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 如果在查看<span lang="EN-US">Slave</span>机器中发现<span lang="EN-US">"DataNode"</span>和<span lang="EN-US">"TaskTracker"</span>没有起来时，先查看一下日志的，如果是<span lang="EN-US">"namespaceID"</span>不一致问题，采用<span lang="EN-US">"</span>常见问题<span lang="EN-US">FAQ6.2"</span>进行解决，如果是<span lang="EN-US">"No route to host"</span>问题，采用<span lang="EN-US">"</span>常见问题<span lang="EN-US">FAQ6.3"</span>进行解决。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> （<span lang="EN-US">2</span>）验证方式二：用</span><span lang="EN-US"><span style="font-size: 12pt;">"hadoop dfsadmin -report"</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 用这个命令可以查看<span lang="EN-US">Hadoop</span>集群的状态。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212244232.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image046[11]" src="http://images.cnitblog.com/blog/390583/201401/182212263453.png" alt="clip_image046[11]" width="523" height="613" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&nbsp;</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&nbsp;</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&nbsp;</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">4.4 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">网页查看集群</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="color: #3366ff;"><span style="font-size: 12pt;">（<span lang="EN-US">1</span>）访问</span><span lang="EN-US"><span style="font-size: 12pt;">"http://192.168.1.141:50030"</span></span></span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212278613.jpg"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image048[11]" src="http://images.cnitblog.com/blog/390583/201401/182212290801.jpg" alt="clip_image048[11]" width="553" height="323" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="color: #3366ff;"><span style="font-size: 12pt;">（<span lang="EN-US">2</span>）访问</span></span></span></strong><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #3366ff;">http://192.168.1.142:50070</span></span></strong>"</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212300488.jpg"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image050[11]" src="http://images.cnitblog.com/blog/390583/201401/182212310022.jpg" alt="clip_image050[11]" width="553" height="411" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 8.7pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="font-size: 14pt;">5</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span><span style="font-size: 14pt;">、常见问题</span><span lang="EN-US"><span style="font-size: 14pt;">FAQ</span></span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">5.1 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">关于</span><span lang="EN-US"><span style="font-size: 12pt;"> Warning: $HADOOP_HOME is deprecated.</span></span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> <span lang="EN-US">hadoop</span>安装完之后敲入<span lang="EN-US">hadoop</span>命令时，<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">老</span></span></strong>是提示这个警告：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">Warning: $HADOOP_HOME is deprecated.</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 经查<span lang="EN-US">hadoop-1.1.2/bin/hadoop</span>脚本和<span lang="EN-US">"hadoop-config.sh"</span>脚本，发现脚本中对<span lang="EN-US">HADOOP_HOME</span>的环境变量设置做了判断，其实根本不需要设置<span lang="EN-US">HADOOP_HOME</span>环境变量。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 解决方案一：编辑<span lang="EN-US">"/etc/profile"</span>文件，去掉<span lang="EN-US">HADOOP_HOME</span>的变量设定，重新输入<span lang="EN-US">hadoop fs</span>命令，警告消失。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 解决方案二：编辑<span lang="EN-US">"/etc/profile"</span>文件，添加一个环境变量，之后警告消失：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">export HADOOP_HOME_WARN_SUPPRESS=1</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">5.2 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">解决<span lang="EN-US">"no datanode to stop"</span>问题</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 当我停止<span lang="EN-US">Hadoop</span>时发现如下信息：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;</span></span><span style="font-size: 12pt;"><span style="mso-spacerun: yes;">&nbsp;&nbsp; </span></span><span style="mso-bidi-font-weight: bold;"><span style="font-size: 12pt;">no datanode to stop</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 原因：每次<span lang="EN-US">namenode format</span>会重新创建一个<span lang="EN-US">namenodeId</span>，而<span lang="EN-US">tmp/dfs/data</span>下包含了上次<span lang="EN-US">format</span>下的<span lang="EN-US">id</span>，<span lang="EN-US">namenode format</span>清空了<span lang="EN-US">namenode</span>下的数据，但是没有清空<span lang="EN-US">datanode</span>下的数据，导致启动时失败，有两种解决方案：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt; color: #ff00ff;">第一种解决方案如下：</span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="color: #3366ff;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">1</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">）先删除</span><span lang="EN-US"><span style="font-size: 12pt;">"/usr/hadoop/tmp"</span></span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">rm -rf /usr/hadoop/tmp</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="color: #3366ff;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">2</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">）创建<span lang="EN-US">"/usr/hadoop/tmp"</span>文件夹</span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">mkdir /usr/hadoop/tmp</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="color: #3366ff;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">3</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">）删除<span lang="EN-US">"/tmp"</span>下以<span lang="EN-US">"hadoop"</span>开头文件</span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">rm -rf /tmp/hadoop*</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="color: #3366ff;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">4</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">）重新格式化</span><span lang="EN-US"><span style="font-size: 12pt;">hadoop</span></span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-family: 宋体;"><span style="font-size: 12pt;">&nbsp;</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">hadoop namenode -format</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="color: #3366ff;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">5</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">）启动</span><span lang="EN-US"><span style="font-size: 12pt;">hadoop</span></span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">start-all.sh</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 使用第一种方案，有种不好处就是原来集群上的重要数据全没有了。假如说<span lang="EN-US">Hadoop</span>集群已经运行了一段时间。建议采用第二种。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt; color: #ff00ff;">第二种方案如下：</span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">1</span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">）修改每个<span lang="EN-US">Slave</span>的<span lang="EN-US">namespaceID</span>使其与<span lang="EN-US">Master</span>的<span lang="EN-US">namespaceID</span>一致。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">或者</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">2</span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">）修改<span lang="EN-US">Master</span>的<span lang="EN-US">namespaceID</span>使其与<span lang="EN-US">Slave</span>的<span lang="EN-US">namespaceID</span>一致。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 该<span lang="EN-US">"namespaceID"</span>位于<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">/usr/hadoop/tmp</span></span><span><span style="color: #ff0000;">/dfs/name/current/VERSION</span></span></strong><span><span style="color: #0000ff;">"</span></span></span><span><span style="color: #0000ff;">文件中，前面<strong style="mso-bidi-font-weight: normal;">蓝色</strong></span></span>的可能根据实际情况变化，但后面<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">红色一般</span></span></strong>是不变的。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 例如：查看<span lang="EN-US">"Master"</span>下的<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">VERSION</span></span></strong>"</span>文件</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span lang="EN-US"><a href="http://images.cnitblog.com/blog/390583/201401/182212319397.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="clip_image051[19]" src="http://images.cnitblog.com/blog/390583/201401/182212332363.png" alt="clip_image051[19]" width="438" height="153" border="0" /></a></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 本人建议采用<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">第二种</span></span></strong>，这样方便快捷，而且还能防止误删。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">5.3 Slave</span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">服务器中<span lang="EN-US">datanode</span>启动后又自动关闭</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 查看日志发下如下错误。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="color: #ff0000;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">ERROR </span></span></span></strong><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">org.apache.hadoop.hdfs.server.datanode.DataNode: java.io.IOException: Call to ... failed on local exception: java.net.NoRouteToHostException: </span><strong style="mso-bidi-font-weight: normal;"><span><span style="font-size: 12pt; color: #ff0000;">No route to host</span></span></strong></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 解决方案是：关闭防火墙</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">5.4 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">从本地往<span lang="EN-US">hdfs</span>文件系统上传文件</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 出现如下错误：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span lang="EN-US"><span style="font-size: 12pt;">INFO hdfs.DFSClient: Exception in createBlockOutputStream java.io.IOException: </span><strong style="mso-bidi-font-weight: normal;"><span><span style="font-size: 12pt; color: #ff0000;">Bad connect ack with firstBadLink</span></span></strong></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span lang="EN-US"><span style="font-size: 12pt;">INFO hdfs.DFSClient: Abandoning block blk_-1300529705803292651_37023</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span lang="EN-US"><span style="font-size: 12pt;">WARN hdfs.DFSClient: DataStreamer Exception: java.io.IOException: </span><strong style="mso-bidi-font-weight: normal;"><span><span style="font-size: 12pt; color: #ff0000;">Unable to create new block.</span></span></strong></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 解决方案是：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt; color: #3366ff;"> <span lang="EN-US">1</span>）关闭防火墙</span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="color: #3366ff;"><span style="font-size: 12pt;"> <span lang="EN-US">2</span>）禁用</span><span lang="EN-US"><span style="font-size: 12pt;">selinux</span></span></span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="font-family: 宋体;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">编辑<span lang="EN-US"> "<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">/etc/selinux/config</span></span></strong>"</span>文件，设置</span><span lang="EN-US"><span style="font-size: 12pt;">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">SELINUX</span></span></strong>=<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff00ff;">disabled</span></span></strong>"</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">5.5 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">安全模式导致的错误</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 出现如下错误：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span lang="EN-US"><span style="font-size: 12pt;">org.apache.hadoop.dfs.SafeModeException: </span><strong style="mso-bidi-font-weight: normal;"><span><span style="font-size: 12pt; color: #ff0000;">Cannot delete ..., Name node is in safe mode</span></span></strong></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 在分布式文件系统启动的时候，开始的时候会有安全模式，当分布式文件系统处于安全模式的情况下，文件系统中的内容不允许修改也不允许删除，直到安全模式结束。安全模式主要是为了系统启动的时候检查各个<span lang="EN-US">DataNode</span>上数据块的有效性，同时根据策略必要的复制或者删除部分数据块。运行期通过命令也可以进入安全模式。在实践过程中，系统启动的时候去修改和删除文件也会有安全模式不允许修改的出错提示，只需要等待一会儿即可。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 解决方案是：关闭安全模式</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="font-size: 12pt;">hadoop dfsadmin -safemode leave</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">5.6 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">解决</span><span lang="EN-US"><span style="font-size: 12pt;">Exceeded MAX_FAILED_UNIQUE_FETCHES</span></span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 出现错误如下：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span lang="EN-US"><span style="font-size: 12pt;">Shuffle Error: Exceeded MAX_FAILED_UNIQUE_FETCHES; bailing-out</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 程序里面需要打开多个文件，进行分析，系统一般默认数量是<span lang="EN-US">1024</span>，（用<span lang="EN-US">ulimit -a</span>可以看到）对于正常使用是够了，但是对于程序来讲，就太少了。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 解决方案是：修改<span lang="EN-US">2</span>个文件。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="color: #3366ff;"><span style="font-size: 12pt;"> <span lang="EN-US">1</span>）</span><span lang="EN-US"><span style="font-size: 12pt;">"/etc/security/limits.conf"</span></span></span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">vi /etc/security/limits.conf </span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 加上：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">soft nofile 102400</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">hard nofile 409600</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="color: #3366ff;"><span style="font-size: 12pt;"> <span lang="EN-US">2</span>）</span><span lang="EN-US"><span style="font-size: 12pt;">"/etc/pam.d/login"</span></span></span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">vim /etc/pam.d/login</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 添加：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">session required /lib/security/pam_limits.so</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 针对第一个问题我纠正下答案：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 这是<span lang="EN-US">reduce</span>预处理阶段<span lang="EN-US">shuffle</span>时获取已完成的<span lang="EN-US">map</span>的输出失败次数超过上限造成的，上限默认为<span lang="EN-US">5</span>。引起此问题的方式可能会有很多种，比如网络连接不正常，连接超时，带宽较差以及端口阻塞等。通常框架内网络情况较好是不会出现此错误的。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">5.7 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">解决</span><span lang="EN-US"><span style="font-size: 12pt;">"Too many fetch-failures"</span></span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 出现这个问题主要是结点间的连通不够全面。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 解决方案是：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="color: #3366ff;"><span style="font-size: 12pt;"> <span lang="EN-US">1</span>）检查</span><span lang="EN-US"><span style="font-size: 12pt;">"/etc/hosts"</span></span></span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 要求本机<span lang="EN-US">ip </span>对应服务器名</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 要求要包含所有的服务器<span lang="EN-US">ip +</span>服务器名</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="color: #3366ff;"><span style="font-size: 12pt;"> <span lang="EN-US">2</span>）检查</span><span lang="EN-US"><span style="font-size: 12pt;">".ssh/authorized_keys"</span></span></span></span></span></strong></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 要求包含所有服务器（包括其自身）的</span><span lang="EN-US"><span style="font-size: 12pt;">public key</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">5.8 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">处理速度特别的慢</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 出现<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #ff0000;">map</span></span></strong>很<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">快</span></span></strong>，但是<strong style="mso-bidi-font-weight: normal;"><span lang="EN-US"><span style="color: #ff0000;">reduce</span></span></strong>很<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #0000ff;">慢</span></span></strong>，而且反复出现<span lang="EN-US">"<strong style="mso-bidi-font-weight: normal;"><span><span style="color: #ff0000;">reduce=0%</span></span></strong>"</span>。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 解决方案如下：</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 结合解决方案<span lang="EN-US">5.7</span>，然后修改<span lang="EN-US">"conf/hadoop-env.sh"</span>中的</span><span lang="EN-US"><span style="font-size: 12pt;">"export HADOOP_HEAPSIZE=4000"</span></span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 10.5pt 0cm;" align="justify"><span style="font-family: 宋体;"><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-size: 12pt;">5.9 </span></span></strong><strong style="mso-bidi-font-weight: normal;"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-size: 12pt;">解决<span lang="EN-US">hadoop OutOfMemoryError</span>问题</span></span></strong></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 出现这种异常，明显是<span lang="EN-US">jvm</span>内存不够得原因。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 解决方案如下：要修改所有的<span lang="EN-US">datanode</span>的<span lang="EN-US">jvm</span>内存大小。</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;" lang="EN-US"><span style="font-family: 宋体;"><span style="mso-spacerun: yes;"><span style="font-size: 12pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 12pt;">Java &ndash;Xms 1024m -Xmx 4096m</span></span></span></p>
<p class="MsoNormal" style="text-justify: inter-ideograph; margin: 0cm 0cm 0pt; mso-margin-top-alt: auto; mso-margin-bottom-alt: auto;" align="justify"><span style="mso-bidi-font-size: 10.0pt;"><span style="font-family: 宋体;"><span style="font-size: 12pt;"> 一般<span lang="EN-US">jvm</span>的最大内存使用应该为总内存大小的一半，我们使用的<span lang="EN-US">8G</span>内存，所以设置为<span lang="EN-US">4096m</span>，这一值可能依旧不是最优的值。</span></span></span></p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<div class = "postDesc">posted @ <span id="post-date">2014-01-18 22:17</span> <a href='http://www.cnblogs.com/lanxuezaipiao/'>Alexia(minmin)</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href ="http://i.cnblogs.com/EditPosts.aspx?postid=3525554" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(3525554);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,isLogined=false,cb_blogId=113759,cb_entryId=3525554,cb_blogApp=currentBlogApp,cb_blogUserGuid='edc6b140-ec73-e111-aa3f-842b2b196315',cb_entryCreatedDate='2014/1/18 22:17:00';loadViewCount(cb_entryId);</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" id="lnk_RefreshComments" onclick="return RefreshCommentList();">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
<div id="comment_form_container"></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="site_nav_under"><a href="http://www.cnblogs.com/" target="_blank" title="开发者的网上家园">博客园首页</a><a href="http://q.cnblogs.com/" target="_blank" title="程序员问答社区">博问</a><a href="http://news.cnblogs.com/" target="_blank" title="IT新闻">新闻</a><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a><a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a><a href="http://kb.cnblogs.com/" target="_blank">知识库</a></div>
<div id="opt_under_post"></div>
<script type="text/javascript">
    var enableGoogleAd = canShowAdsense(); 
    fixPostBodyFormat();
</script>
<script type='text/javascript'>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
    (function () {
        if (enableGoogleAd) {
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (useSSL ? 'https:' : 'http:') +
              '//www.googletagservices.com/tag/js/gpt.js';
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        }
  })();
</script>
<script type='text/javascript'>
    try {
        if (enableGoogleAd) {
            googletag.cmd.push(function() {
            googletag.defineSlot('/1090369/cnblogs_blogpost_C2', [468, 60], 'div-gpt-ad-1433581717989-0').addService(googletag.pubads());
            googletag.defineSlot('/1090369/cnblogs_blogpost_C1_sitehome', [300, 250], 'div-gpt-ad-1433581717989-1').addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.pubads().collapseEmptyDivs();
            googletag.enableServices();
            });
        };
    } catch (e) { }
</script>
<div id="google_ad_c1" class="c_ad_block">
    <div id='div-gpt-ad-1433581717989-1' style='height:250px; width:300px;'>
    <script type='text/javascript'>
        try {
            if (enableGoogleAd) {
                googletag.cmd.push(function () { googletag.display('div-gpt-ad-1433581717989-1'); });
            } else {
                $('#div-gpt-ad-1433581717989-1').hide();
            }
    } catch (e) { }
    </script>
    </div>
</div>
<div id="under_post_news"></div>
<div id="google_ad_c2" class="c_ad_block">
<div id='div-gpt-ad-1433581717989-0' style='height:60px; width:468px;'>
<script type='text/javascript'>
try {
    if (enableGoogleAd) {
        googletag.cmd.push(function () { googletag.display('div-gpt-ad-1433581717989-0'); });
    } else {
        $('#div-gpt-ad-1433581717989-0').hide();
    }
} catch (e) { }
</script>
</div>
</div>
<div id="under_post_kb"></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
$(function () {
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    setTimeout(function () { incrementViewCount(cb_entryId); }, 200);
});
</script>
</div>

	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright &copy;2015 Alexia(minmin)
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->
<!--PageEndHtml Block Begin-->
<script type="text/javascript">
    var wumiiSitePrefix = "http://www.cnblogs.com/lanxuezaipiao/";
    var wumiiParams = "&num=5&mode=3&pf=CNBLOGS";
</script>
<script type="text/javascript" src="http://widget.wumii.cn/ext/relatedItemsWidget"></script>
<a href="http://www.wumii.com/widget/relatedItems" style="border:0;">
    <img src="http://static.wumii.cn/images/pixel.png" alt="无觅关联推荐，快速提升流量" style="border:0;padding:0;margin:0;" />
</a>



<!--评论，生成气泡效果标签代码-->
<script type="text/javascript" language="javascript"> 
    $(document).ready(function() {
        var commentTime = setInterval(function(){if($("#comments_pager_bottom").length>0){CommentBubble();clearTimeout(commentTime);}},50);
    }); 
    function CommentBubble()
    {
var w1 = '<div class="list">' +
        '<table class="out" border="0" cellspacing="0" cellpadding="0"> ' +
            '<tr>' +
                '<td class="icontd" align="right" valign="bottom">' +
                    '<img src="http://images.cnblogs.com/cnblogs_com/lanxuezaipiao/533599/o_%E5%A4%B4%E5%83%8F.png" width="56px" height="57px"/>' +
                '</td>' +
                '<td align="left" valign="bottom" class="q">' +
                    '<table border="0" cellpadding="0" cellspacing="0" style=""> ' +
                        '<tr><td class="topleft"></td><td class="top"></td><td class="topright"></td></tr> ' +
                        '<tr><td class="left"></td> <td align="left" class="conmts"><p>';
 
 
        var w2 = '</p> </td> <td class="right"></td></tr> ' +
                        '<tr><td class="bottomleft"></td><td class="bottom"></td><td class="bottomright"></td></tr> ' +
                    '</table>' +
                '</td> ' +
            '</tr> ' +
        '</table> ' +
    '</div>';
 
        $.each($(".blog_comment_body"), function(i, t) {
            $(t).html(w1 + $(t).html() + w2);
        });
$(".louzhu").closest(".feedbackItem").find(".out").removeClass("out").addClass("inc");
        /*.find(".q").attr("align","right");*/
        }
</script>


<!--Google analytics跟踪脚本-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43364528-2', 'auto');
  ga('send', 'pageview');

</script>
<!--PageEndHtml Block End-->
</body>
</html>
